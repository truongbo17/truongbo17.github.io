(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[356],{22469:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(27002),i=n.n(r),o=n(14232),a=n(88907),s=n(3410),c=n(57257),l=n(89099),p=n(36423),d=n(37876);let u=function(){var e=(0,l.useRouter)(),t=(0,o.useState)(!0),n=t[0],r=t[1],u=(0,o.useState)(""),h=u[0],f=u[1],x=(0,o.useState)(window.innerWidth),m=x[0],b=x[1];return((0,o.useEffect)(function(){var e=window.location.pathname,t=p.A.APP_URL||window.location.origin,n=window.location.search,r="",i=e.match(/\/s\/(?:pc\/)?([^/?]+)/);if(i&&i[1])r="/s/".concat(i[1]);else{var o=e.match(/\/showcase\/(?:pc\/)?([^/?]+)/);if(o&&o[1])r="/showcase/".concat(o[1]);else{var a=e.match(/\/invite\/(?:pc\/)?([^/?]+)/);a&&a[1]&&(r="/invite/".concat(a[1]))}}r&&f("".concat(t).concat(r).concat(n)),b(window.innerWidth);var s=function(){b(window.innerWidth)};return window.addEventListener("resize",s),function(){return window.removeEventListener("resize",s)}},[e.asPath]),!h||m<=1e3)?null:(0,d.jsxs)("div",{className:"jsx-3196837057 "+"qr-code-popup ".concat(n?"expanded":"collapsed"),children:[n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:function(){return r(!1)},"aria-label":"Thu nhỏ",className:"jsx-3196837057 qr-code-close-btn",children:(0,d.jsx)(s.A,{})}),(0,d.jsxs)("div",{className:"jsx-3196837057 qr-code-content",children:[(0,d.jsx)("div",{className:"jsx-3196837057 qr-code-wrapper",children:(0,d.jsx)(a.A,{value:h,size:120,errorLevel:"M",icon:"".concat(p.A.CDN_URL,"/assets/logos/logo-cinelove-192.png"),iconSize:32})}),(0,d.jsx)("p",{className:"jsx-3196837057 qr-code-text",children:"Qu\xe9t m\xe3 QR để xem tr\xean điện thoại"})]})]}):(0,d.jsx)("button",{onClick:function(){return r(!0)},"aria-label":"Mở QR code",className:"jsx-3196837057 qr-code-icon-btn",children:(0,d.jsx)(c.A,{})}),(0,d.jsx)(i(),{id:"3196837057",children:[".qr-code-popup.jsx-3196837057{position:fixed;bottom:64px;right:64px;z-index:1000;background:white;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,0.15);-webkit-transition:all 0.3s cubic-bezier(0.4,0,0.2,1);transition:all 0.3s cubic-bezier(0.4,0,0.2,1);-webkit-animation:float-jsx-3196837057 3s ease-in-out infinite;animation:float-jsx-3196837057 3s ease-in-out infinite;overflow:hidden;}",".qr-code-popup.expanded.jsx-3196837057{padding:12px;min-width:140px;}",".qr-code-popup.collapsed.jsx-3196837057{padding:0;width:48px;height:48px;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}","@-webkit-keyframes float-jsx-3196837057{0%,100%{-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}50%{-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px);transform:translateY(-10px);}}","@keyframes float-jsx-3196837057{0%,100%{-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}50%{-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px);transform:translateY(-10px);}}",".qr-code-close-btn.jsx-3196837057{position:absolute;top:6px;right:6px;background:transparent;border:none;cursor:pointer;padding:4px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#666;font-size:12px;width:20px;height:20px;border-radius:4px;-webkit-transition:all 0.2s ease;transition:all 0.2s ease;z-index:1;}",".qr-code-close-btn.jsx-3196837057:hover{background:#f5f5f5;color:#333;}",".qr-code-icon-btn.jsx-3196837057{background:transparent;border:none;cursor:pointer;padding:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#666;font-size:24px;width:100%;height:100%;border-radius:50%;-webkit-transition:all 0.2s ease;transition:all 0.2s ease;}",".qr-code-icon-btn.jsx-3196837057:hover{background:#f5f5f5;color:#333;-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);}",".qr-code-content.jsx-3196837057{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;}",".qr-code-wrapper.jsx-3196837057{padding:6px;background:white;border-radius:6px;}",".qr-code-text.jsx-3196837057{margin:0;font-size:11px;color:#666;text-align:center;font-weight:500;line-height:1.4;max-width:120px;}"]})]})},h=function(e){var t=e.children,n=e.containerWidth;return(0,d.jsxs)("div",{style:{backgroundColor:"#f0f2f5",height:"100vh",width:"100vw",paddingTop:"5vh"},className:"jsx-3147566159 pc-container",children:[(0,d.jsx)("div",{style:{width:n?"".concat(n,"px"):"auto",height:"90vh",margin:"auto",position:"relative",border:"1px solid #e0e0e0",boxShadow:"0 0 10px 0 rgba(0, 0, 0, 0.1)",borderRadius:3,overflow:"hidden"},className:"jsx-3147566159 pc-content",children:t}),(0,d.jsx)(u,{}),(0,d.jsx)(i(),{id:"3147566159",children:["#app-view-index{height:100% !important;}",".pc-container #cinelove-toolbar .message-box-button{width:130px;}",".pc-container #cinelove-toolbar .message-box-button,.pc-container #cinelove-toolbar #animation-gift-preview-btn,.pc-container #cinelove-toolbar #cinelove-gift-button,.pc-container #cinelove-toolbar #cinelove-like-button{font-size:12px;height:35px;line-height:35px;border-radius:25px;}",".pc-container #cinelove-toolbar #animation-gift-preview-btn span{font-size:12px;}",".pc-container #cinelove-toolbar #cinelove-like-button,.pc-container #cinelove-toolbar #cinelove-gift-button{width:35px;}",".pc-container .bar-messwin *{-webkit-transform:scale(0.95);-ms-transform:scale(0.95);transform:scale(0.95);}",".pc-container .bar-gift-new .select-type .option{font-size:17px !important;cursor:pointer;}",".pc-container .bar-gift-new .gift-li .title{font-size:10px !important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;width:70px;}",".pc-container .bar-gift-new .give-tip{font-size:10px !important;}",".pc-container .bar-gift-new .give-username{-webkit-transform:scale(0.95);-ms-transform:scale(0.95);transform:scale(0.95);}",".pc-container .animate-slide-gift.gift-minibar *{-webkit-transform:scale(0.95);-ms-transform:scale(0.95);transform:scale(0.95);}",".pc-container #cinelove-canvas-preview,.pc-container #cinelove-canvas{-webkit-transform:scale(0.95);-ms-transform:scale(0.95);transform:scale(0.95);}"]})]})}},36956:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(63857),i=n(43081),o=n.n(i),a=n(30638),s=n(33413),c=n(14232),l=n(73301),p=n(10553),d=n(89099),u=n(46264),h=n(37876);let f=function(e){var t,n=e.templateId,i=e.position,f=e.size,x=void 0===f?"medium":f,m=e.isBlock,b=e.color,w=void 0===b?"#ff4d6d":b,v=(0,c.useState)(!1),g=v[0],k=v[1],j="authenticated"===(0,p.useSession)().status,y=(0,d.useRouter)(),O=(0,u.p)(),z=O.initializeFavorites,N=O.toggleFavorite,A=O.isFavorite;(0,c.useEffect)(function(){j&&z()},[j,z]);var S=(t=(0,r.A)(o().mark(function e(){var t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}return e.abrupt("return");case 2:if(j){e.next=6;break}return l.Ay.error("Vui l\xf2ng đăng nhập để th\xeam v\xe0o danh s\xe1ch y\xeau th\xedch"),y.push("/login?redirect=".concat(y.asPath)),e.abrupt("return");case 6:return k(!0),e.prev=7,t=A(n),e.next=11,N(n);case 11:e.sent?l.Ay.success(t?"Đ\xe3 x\xf3a khỏi danh s\xe1ch y\xeau th\xedch":"Đ\xe3 th\xeam v\xe0o danh s\xe1ch y\xeau th\xedch"):l.Ay.error("Kh\xf4ng thể cập nhật trạng th\xe1i y\xeau th\xedch. Vui l\xf2ng thử lại sau."),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),console.error("Error updating favorite status:",e.t0),l.Ay.error("Đ\xe3 xảy ra lỗi. Vui l\xf2ng thử lại sau.");case 19:return e.prev=19,k(!1),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[7,15,19,22]])})),function(){return t.apply(this,arguments)}),E={small:20,medium:24,large:32}[x];return(0,h.jsx)("button",{onClick:S,disabled:g,className:"".concat(void 0!==m&&m?"block":"absolute"," ").concat("small"===x?"w-8 h-8":"w-10 h-10"," ").concat({"top-right":"top-3 right-3","top-left":"top-3 left-3"}[void 0===i?"top-right":i]," z-40 flex items-center justify-center bg-white bg-opacity-70 backdrop-blur-sm rounded-full shadow-md hover:bg-opacity-90 transition-all duration-200"),"aria-label":A(n)?"X\xf3a khỏi y\xeau th\xedch":"Th\xeam v\xe0o y\xeau th\xedch",children:A(n)?(0,h.jsx)(a.A,{style:{fontSize:E,color:w}}):(0,h.jsx)(s.A,{style:{fontSize:E,color:w}})})}},62684:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/template/pc/[templateSlug]",function(){return n(83450)}])},83450:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__N_SSP:()=>T,default:()=>_});var r=n(59860),i=n(42969),o=n(27925),a=n(63857),s=n(43081),c=n.n(s),l=n(66125),p=n(14232),d=n(6428),u=n.n(d),h=n(33845),f=n.n(h),x=n(16752),m=n(4105),b=n(22469),w=n(89099),v=n(733),g=n(62867),k=n(32939),j=n(43107),y=n(83240),O=n(36956),z=n(89862),N=n(32716),A=n(54737),S=n(37876),E=["editorViewportWidth"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,i.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var T=!0;let _=function(e){var t=e.templateData,n=e.templateId,i=e.canonicalUrl,s=(0,w.useRouter)(),d=(0,v.bi)().setPageId,h="true"===s.query.onlyPreview,P="true"===s.query.hide;(0,p.useEffect)(function(){var e;d(n),(e=(0,a.A)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,j.Xc)(n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error tracking template view:",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(){return e.apply(this,arguments)})()},[n,s,t.slug]);var T=JSON.parse(u().decompress(u().decodeBase64(t.templateData))),_=(0,p.useState)(!0),C=_[0],R=_[1],L=(0,p.useMemo)(function(){return(0,A.n)(T)},[]),Y=L.hasEnvelope&&L.preventScrollUntilOpened,D=(0,p.useState)(T),I=D[0],W=D[1],M=(0,p.useState)(0),V=M[0],F=M[1];(0,p.useEffect)(function(){var e=function(){R(!0);var e=parseInt(T.ROOT.props.width),t=parseInt(T.ROOT.props.height),n=V/e,i=Math.max(t*n,.9*window.innerHeight),a=Object.entries(T).reduce(function(e,t){var r=(0,o.A)(t,2),i=r[0],a=r[1];if(!a.props)return e[i]=a,e;var s=q(q({},a.props),{},{top:a.props.top*n,left:a.props.left*n,width:a.props.width*n,height:a.props.height*n,fontSize:a.props.fontSize*n});return e[i]=q(q({},a),{},{props:s}),e},{}),s=T.ROOT.props,c=(s.editorViewportWidth,(0,r.A)(s,E));a.ROOT=q(q({},T.ROOT),{},{props:q(q({},c),{},{width:V,height:i})}),W(a),setTimeout(function(){R(!1)},1e3)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}},[V]),(0,p.useEffect)(function(){var e=function(){var e=Math.round(.55*(.9*window.innerHeight));e>500?F(500):F(e)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var B="".concat(t.templateName," - ").concat((0,N.g)(t.categoryId)," miễn ph\xed");return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(g.bV,{title:B,titleTemplate:"%s | CineLove",defaultTitle:"CineLove",description:"".concat(B," - Thiệp online tr\xean CineLove"),canonical:i,openGraph:{type:"website",url:i,title:B,description:"".concat(B," - Thiệp online tr\xean CineLove"),images:[{url:t.thumbnail||"/cinelove-default-thumbnail.jpg",width:1200,height:630,alt:B}],siteName:"CineLove"},twitter:{handle:"@cinelove",site:"@cinelove",cardType:"summary_large_image"}}),(0,S.jsx)(b.A,{containerWidth:V,children:(0,S.jsx)(m.A,{isTemplatePreview:!0,device:"pc",pageData:t,shouldPreventScroll:Y,children:(0,S.jsxs)(k.Z,{isProcessing:C,className:"h-full",scrollSpeed:.08,initialDelay:2e3,rootBackground:I.ROOT.props.backgroundColor,shouldPreventScroll:Y,children:[C&&(0,S.jsx)("div",{className:"absolute inset-0 bg-white z-50 flex items-center justify-center",children:(0,S.jsx)(f(),{animationData:x,loop:!0,style:{width:200,height:200}})}),(0,S.jsx)(l.KE,{resolver:z.K6,enabled:!1,children:(0,S.jsx)(l.wI,{data:I},I.ROOT.props.width)})]})})}),(0,S.jsxs)("div",{className:"fixed top-2 left-2 z-50",children:[!P&&!h&&(0,S.jsx)(y.Ay,{onClick:function(){return s.push("/editor-template/".concat(n))},children:"Chỉnh sửa mẫu n\xe0y"}),!P&&h&&(0,S.jsx)(y.Ay,{onClick:function(){var e=t.templateName||"Mẫu ".concat(t.id);s.push({pathname:"/thiep-tron-goi",query:{templateId:t.id,templateName:e}})},type:"primary",className:"bg-gradient-to-r from-pink-500 to-purple-600 border-0 hover:from-pink-600 hover:to-purple-700",children:"Đặt thiệp n\xe0y"}),!P&&(0,S.jsx)(O.A,{templateId:n,isBlock:!0,size:"medium"})]})]})}}},e=>{e.O(0,[3634,7884,3433,530,6701,888,8433,8513,4938,8511,713,3753,3629,241,2517,9942,9897,1385,5711,289,1285,7141,9026,9923,998,878,3301,8594,3521,4059,8058,5503,1871,9084,4669,501,1805,8561,6499,8972,8593,5659,7974,916,1210,3617,4085,144,4587,4322,5958,2851,7663,9559,939,645,3587,7315,5404,7603,8162,7251,1508,6264,3507,3873,2599,1078,636,6593,8792],()=>e(e.s=62684)),_N_E=e.O()}]);