"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1508],{24530:(e,t,n)=>{n.d(t,{E:()=>l,E4:()=>c,HT:()=>s,Hd:()=>o,US:()=>m,bE:()=>a,gl:()=>i,mo:()=>u});var r=n(90769),a={FREE:{price:"0",originalPrice:"0",isPromotional:!1},BASIC:{price:"199.000",originalPrice:"299.000",isPromotional:!0},PREMIUM:{price:"299.000",originalPrice:"499.000",isPromotional:!0},END_PROMOTIONAL_DATE:new Date(Date.now()+864e5).toLocaleDateString("vi-VN")},s={free:{price:"139.000",originalPrice:"199.000",isPromotional:!0},basic:{price:"100.000",originalPrice:"199.000",isPromotional:!0},premium:{price:"100.000",originalPrice:"199.000",isPromotional:!0}},i=function(e,t){var n=parseInt(e.replace(/[^\d]/g,"")),r=parseInt(t.replace(/[^\d]/g,""));return 0===r?0:Math.round((r-n)/r*100)},o=[{id:"website_builder",text:"Tr\xecnh thiết kế website",category:"core",plans:{free:!0,basic:!0,premium:!0}},{id:"website_count",text:"Số lượng website/thiệp c\xf3 thể tạo",category:"core",plans:{free:"limited",basic:"limited",premium:"limited"},limitDetails:{free:r.HK.free.maxWebsites.toString(),basic:r.HK.basic.maxWebsites.toString(),premium:r.HK.premium.maxWebsites.toString()}},{id:"storage_duration",text:"Thời hạn lưu website",category:"core",plans:{free:"limited",basic:"limited",premium:"limited"},limitDetails:{free:r.HK.free.duration,basic:r.HK.basic.duration,premium:r.HK.premium.duration}},{id:"image_uploads",text:"Số lượng h\xecnh ảnh tải l\xean",category:"core",plans:{free:"limited",basic:"limited",premium:"limited"},limitDetails:{free:"".concat(r.HK.free.maxImages.toLocaleString()," h\xecnh"),basic:"".concat(r.HK.basic.maxImages.toLocaleString()," h\xecnh"),premium:"".concat(r.HK.premium.maxImages.toLocaleString()," h\xecnh")}},{id:"view_limit",text:"Số lượt xem thiệp/website tối đa",category:"core",plans:{free:"limited",basic:"limited",premium:"limited"},limitDetails:{free:"".concat(r.HK.free.maxViews.toLocaleString()," lượt"),basic:"".concat(r.HK.basic.maxViews.toLocaleString()," lượt"),premium:"".concat(r.HK.premium.maxViews.toLocaleString()," lượt")}},{id:"remove_watermark",text:"X\xf3a watermark",category:"premium",plans:{free:!1,basic:!0,premium:!0}},{id:"gifts_and_wishes",text:"Tuỳ chỉnh hộp qu\xe0 tặng v\xe0 lời ch\xfac",category:"premium",plans:{free:!1,basic:!0,premium:!0}},{id:"qr_banking",text:"Hộp mừng (QR ng\xe2n h\xe0ng)",category:"premium",plans:{free:!1,basic:!0,premium:!0}},{id:"effects",text:"Hiệu ứng chuyển động, hiệu ứng mở m\xe0n",category:"premium",plans:{free:!1,basic:!0,premium:!0},temporaryCanUse:!1},{id:"animated_envelope",text:"Hiệu ứng mở phong b\xec thư",category:"premium",plans:{free:!1,basic:!0,premium:!0},temporaryCanUse:!1},{id:"hyperlink",text:"Th\xeam hyperlink v\xe0o c\xe1c phần tử",category:"premium",plans:{free:!1,basic:!0,premium:!0},temporaryCanUse:!1},{id:"basic_templates",text:"Sử dụng mẫu thiệp Basic",category:"premium",plans:{free:!1,basic:!0,premium:!0},temporaryCanUse:!1},{id:"music_library",text:"Thư viện nhạc phổ biến",category:"premium",plans:{free:!1,basic:!0,premium:!0}},{id:"custom_music",text:"Upload nhạc ri\xeang",category:"premium",plans:{free:!1,basic:!1,premium:!0}},{id:"guest_urls",text:"T\xean kh\xe1ch mời tự động",category:"premium",plans:{free:!1,basic:!1,premium:!0}},{id:"premium_templates",text:"Sử dụng mẫu thiệp Premium",category:"premium",plans:{free:!1,basic:!1,premium:!0},temporaryCanUse:!1},{id:"photo_gallery",text:"Album ảnh chuy\xean nghiệp",category:"premium",plans:{free:!1,basic:!1,premium:!0},temporaryCanUse:!1},{id:"youtube_embed",text:"Nh\xfang video YouTube",category:"premium",plans:{free:!1,basic:!1,premium:!0},temporaryCanUse:!1},{id:"remove_background",text:"X\xf3a nền ảnh tự động (AI)",category:"premium",plans:{free:!1,basic:!1,premium:!0},temporaryCanUse:!1}],c=[{id:"free",name:"free",displayName:"Free",description:"D\xe0nh cho những ai muốn trải nghiệm Cinelove",price:a.FREE.price,originalPrice:a.FREE.originalPrice,isPromotional:a.FREE.isPromotional,promotionalEndDate:a.END_PROMOTIONAL_DATE,duration:"VND",popular:!1,featured:!1,ctaText:"Bắt đầu miễn ph\xed",ctaLink:"/register",limits:{websites:r.HK.free.maxWebsites,duration:r.HK.free.duration,images:r.HK.free.maxImages,views:r.HK.free.maxViews}},{id:"basic",name:"basic",displayName:"Basic",description:"Ph\xf9 hợp cho hầu hết người d\xf9ng",price:a.BASIC.price,originalPrice:a.BASIC.originalPrice,isPromotional:a.BASIC.isPromotional,promotionalEndDate:a.END_PROMOTIONAL_DATE,duration:"VND",popular:!0,featured:!1,ctaText:"Chọn g\xf3i Basic",ctaLink:"/checkout/upgrade?plan=basic",limits:{websites:r.HK.basic.maxWebsites,duration:r.HK.basic.duration,images:r.HK.basic.maxImages,views:r.HK.basic.maxViews}},{id:"premium",name:"premium",displayName:"Premium",description:"Giải ph\xe1p cao cấp v\xe0 to\xe0n diện",price:a.PREMIUM.price,originalPrice:a.PREMIUM.originalPrice,isPromotional:a.PREMIUM.isPromotional,promotionalEndDate:a.END_PROMOTIONAL_DATE,duration:"VND",popular:!1,featured:!0,ctaText:"Chọn g\xf3i Premium",ctaLink:"/checkout/upgrade?plan=premium",limits:{websites:r.HK.premium.maxWebsites,duration:r.HK.premium.duration,images:r.HK.premium.maxImages,views:r.HK.premium.maxViews}}],u=[{question:"T\xf4i c\xf3 thể n\xe2ng cấp g\xf3i dịch vụ sau khi đăng k\xfd kh\xf4ng?",answer:"C\xf3, bạn c\xf3 thể dễ d\xe0ng n\xe2ng cấp l\xean g\xf3i cao hơn bất kỳ l\xfac n\xe0o. Chỉ cần đăng nhập v\xe0o t\xe0i khoản của bạn v\xe0 chọn t\xf9y chọn n\xe2ng cấp."},{question:"Thời hạn lưu trữ website/thiệp l\xe0 g\xec?",answer:"L\xe0 thời hạn c\xe1c website/thiệp của bạn c\xf3 thể hiển thị v\xe0 truy cập. Sau khi hết hạn, c\xe1c website/thiệp của bạn sẽ kh\xf4ng c\xf2n hiển thị, kh\xf4ng truy cập được v\xe0 sẽ bị x\xf3a sau 30 ng\xe0y. Thời hạn lưu trữ phụ thuộc v\xe0o g\xf3i bạn sử dụng. G\xf3i Free: ".concat(r.HK.free.duration,", Basic: ").concat(r.HK.basic.duration,", v\xe0 Premium: ").concat(r.HK.premium.duration,". C\xf3 thể n\xe2ng cấp thời hạn lưu trữ bất cứ l\xfac n\xe0o.")},{question:"T\xf4i c\xf3 thể tạo bao nhi\xeau thiệp hoặc website?",answer:"Số lượng thiệp/website bạn c\xf3 thể tạo phụ thuộc v\xe0o g\xf3i: Free: ".concat(r.HK.free.maxWebsites,", Basic: ").concat(r.HK.basic.maxWebsites,", v\xe0 Premium: ").concat(r.HK.premium.maxWebsites,". C\xf3 thể n\xe2ng cấp th\xeam số lượng tuỳ theo nhu cầu sử dụng.")},{question:"Lượt xem trang/thiệp tối đa l\xe0 g\xec?",answer:"Lượt xem trang/thiệp tối đa l\xe0 số lần người d\xf9ng c\xf3 thể truy cập v\xe0 xem website/thiệp của bạn. Giới hạn n\xe0y phụ thuộc v\xe0o g\xf3i bạn sử dụng: G\xf3i Free: ".concat(r.HK.free.maxViews," lượt, Basic: ").concat(r.HK.basic.maxViews," lượt, v\xe0 Premium: ").concat(r.HK.premium.maxViews," lượt. Khi đạt giới hạn lượt xem, website/thiệp của bạn sẽ tạm thời kh\xf4ng thể truy cập cho đến khi bạn n\xe2ng cấp hoặc mua th\xeam addon. Lượt xem được t\xednh cho mỗi lần người d\xf9ng truy cập v\xe0o trang, bao gồm cả việc refresh.")},{question:"T\xf4i c\xf3 được sử dụng template Basic v\xe0 Premium kh\xf4ng?",answer:"G\xf3i Basic cho ph\xe9p bạn sử dụng c\xe1c template Basic với thiết kế chuy\xean nghiệp. G\xf3i Premium cung cấp quyền truy cập v\xe0o cả template Basic v\xe0 Premium độc quyền với nhiều t\xednh năng v\xe0 hiệu ứng cao cấp hơn."},{question:"G\xf3i dịch vụ c\xf3 thời hạn bao l\xe2u?",answer:"Tất cả c\xe1c g\xf3i trả ph\xed (Basic v\xe0 Premium) đều c\xf3 thời hạn 1 năm. Sau khi hết hạn bạn c\xf3 thể tiếp tục gia hạn, hoặc nếu kh\xf4ng, bạn vẫn c\xf3 thể truy cập v\xe0o c\xe1c t\xe0i nguy\xean đ\xe3 tạo trước đ\xf3. C\xe1c thiệp/website đ\xe3 xuất bản sẽ vẫn được giữ nguy\xean thời hạn lưu trữ như cũ."},{question:"T\xednh năng 'T\xean kh\xe1ch mời tự động' l\xe0 g\xec?",answer:"T\xednh năng n\xe0y cho ph\xe9p bạn tạo 1 mẫu thiệp duy nhất nhưng gửi cho mỗi kh\xe1ch mời sẽ tự động hiển thị t\xean của họ. V\xed dụ: c\xf9ng 1 thiệp cưới, nhưng 'Anh Minh' sẽ thấy 'Tr\xe2n trọng k\xednh mời Anh Minh', c\xf2n 'Bạn Lan' sẽ thấy 'Th\xe2n mời Bạn Lan',... Bạn kh\xf4ng cần tạo nhiều thiệp kh\xe1c nhau, chỉ cần 1 mẫu duy nhất."},{question:"T\xf4i c\xf3 thể tạo bao nhi\xeau T\xean kh\xe1ch mời tự động?",answer:"Bạn c\xf3 thể tạo kh\xf4ng giới hạn số lượng t\xean kh\xe1ch mời tự động. Bạn c\xf3 thể th\xeam h\xe0ng loạt t\xean chỉ với 1 click, xuất file CSV để quản l\xfd, v\xe0 theo d\xf5i trạng th\xe1i đ\xe3 gửi/chưa gửi cho từng kh\xe1ch mời."}],l={free:0,basic:1,premium:2},m=[{icon:"\uD83D\uDCAF",title:"Thiết kế độc quyền",description:"Truy cập c\xe1c mẫu thiệp cao cấp, độc quyền chỉ c\xf3 tại CineLove, được thiết kế bởi c\xe1c chuy\xean gia"},{icon:"\uD83C\uDFA5",title:"Đa phương tiện",description:"T\xedch hợp video, album ảnh v\xe0 \xe2m nhạc cho thiệp cưới ấn tượng"},{icon:"\uD83D\uDD27",title:"T\xf9y chỉnh ho\xe0n to\xe0n",description:"Điều chỉnh mọi chi tiết để phản \xe1nh phong c\xe1ch ri\xeang của bạn"}]},32217:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(51558);n(14232);var a=n(48230),s=n.n(a),i=n(98594),o=n(35365),c=n(10553),u=n(92400),l=n(36423),m=n(37876);let p=function(){var e,t,n,a,p,d,h=(0,c.useSession)().data,g=(0,o.A)().handleLogout,x=(0,u.f)().openDesignModal,f="".concat(l.A.CDN_URL,"/images/user-1.jpg"),b=(null==h||null==(e=h.user)?void 0:e.avatar)||f,v=null==h||null==(t=h.user)?void 0:t.emailVerified,w=(null==h||null==(n=h.user)?void 0:n.role)==="partner";return(0,m.jsx)("div",{className:"relative group/menu",children:(0,m.jsxs)(r.ms,{label:"",className:"rounded-sm w-44",dismissOnClick:!1,renderTrigger:function(){var e;return(0,m.jsx)("span",{className:"h-10 w-10 hover:text-primary hover:bg-lightprimary rounded-full flex justify-center items-center cursor-pointer group-hover/menu:bg-lightprimary group-hover/menu:text-primary",children:(0,m.jsx)("img",{src:b,alt:(null==h||null==(e=h.user)?void 0:e.name)||"User avatar",height:"35",width:"35",className:"rounded-full object-cover",referrerPolicy:"no-referrer",crossOrigin:"anonymous",onError:function(e){e.target.src=f}})})},children:[(0,m.jsxs)("div",{className:"px-4 py-3 border-b",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900 ",children:null==h||null==(a=h.user)?void 0:a.name}),(0,m.jsx)("p",{className:"text-sm text-gray-500 truncate",children:null==h||null==(p=h.user)?void 0:p.email}),(0,m.jsx)("span",{className:"flex items-center justify-center text-sm text-blue-500 bg-gray-100 rounded-xl py-0.5 text-center mt-1 capitalize",children:w?"Partner":(null==h||null==(d=h.user)?void 0:d.plan)||"Free"}),!v&&(0,m.jsx)("span",{className:"flex items-center justify-center text-sm text-yellow-500  py-0.5 text-center mt-1",children:"Chưa x\xe1c thực"})]}),(v?w?[{id:"partner-dashboard",label:"Dashboard",icon:"solar:widget-add-line-duotone",href:"/partner/dashboard",type:"link"},{id:"partner-templates",label:"Thiệp online",icon:"solar:clipboard-heart-linear",href:"/partner/pages",type:"link"},{id:"partner-settings",label:"Th\xf4ng tin Partner",icon:"solar:settings-outline",href:"/partner/settings",type:"link"}]:[{id:"dashboard",label:"Tổng quan",icon:"solar:home-2-linear",href:"/dashboard",type:"link"},{id:"pages",label:"Thiết kế của t\xf4i",icon:"solar:clipboard-heart-linear",href:"/pages",type:"link"},{id:"favorites",label:"Mẫu y\xeau th\xedch",icon:"solar:heart-outline",href:"/favorites",type:"link"},{id:"design",label:"Tạo thiết kế",icon:"solar:pen-new-square-outline",onClick:x,type:"button"}]:[{id:"waiting-room",label:"Sảnh chờ",icon:"solar:home-smile-broken",href:"/dashboard/waiting-room",type:"link"}]).map(function(e){return(0,m.jsxs)(r.ms.Item,{as:"link"===e.type?s():"button",href:e.href,onClick:e.onClick,className:"px-3 py-3 flex items-center bg-hover group/link w-full gap-3 text-dark",children:[(0,m.jsx)(i.In,{icon:e.icon,height:20}),e.label]},e.id)}),(0,m.jsx)("div",{className:"p-3 pt-0",children:(0,m.jsx)(r.$n,{fullSized:!0,onClick:g,size:"md",className:"mt-2 border border-primary text-primary bg-transparent hover:bg-lightprimary outline-none focus:outline-none",children:"Đăng xuất"})})]})})}},35365:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(63857),a=n(43081),s=n.n(a),i=n(10553),o=n(14232),c=n(14e3),u=n(36423),l=n(73301),m=function(){var e,t,n,a,m=(0,o.useState)(!1),p=m[0],d=m[1],h=(0,o.useState)(null),g=h[0],x=h[1],f=(0,c.useRouter)();return{loading:p,error:g,session:(0,i.useSession)().data,handleLogin:(e=(0,r.A)(s().mark(function e(t,n,r,a){var o,c,u;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),x(null),e.next=5,(0,i.signIn)("credentials",{email:t,password:n,remember:r,redirect:!1});case 5:if(!(null!=(o=e.sent)&&o.error)){e.next=10;break}x(o.error),e.next=17;break;case 10:return l.Ay.success("Đăng nhập th\xe0nh c\xf4ng"),e.next=13,new Promise(function(e){return setTimeout(e,500)});case 13:return e.next=15,(0,i.getSession)();case 15:u=e.sent,a?f.push(a):(null==u||null==(c=u.user)?void 0:c.role)==="partner"?u.user.partnerId?f.push("/partner/dashboard"):f.push("/partner/setup"):f.push("/dashboard");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),x("Đăng nhập thất bại. Vui l\xf2ng kiểm tra lại th\xf4ng tin.");case 22:return e.prev=22,d(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[0,19,22,25]])})),function(t,n,r,a){return e.apply(this,arguments)}),handleLogout:(t=(0,r.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.signOut)({redirect:!1});case 2:f.push("/");case 3:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),handleSocialLogin:(n=(0,r.A)(s().mark(function e(t,n){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.signIn)(t,{callbackUrl:n||"/dashboard"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Social login error:",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(e,t){return n.apply(this,arguments)}),handleRegister:(a=(0,r.A)(s().mark(function e(t,n,r){var a,o,c;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u.A.API_URL,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,name:r})});case 3:return a=e.sent,e.next=6,a.json();case 6:if(o=e.sent,a.ok){e.next=9;break}throw Error(o.error||"Registration failed");case 9:return e.next=11,(0,i.signIn)("credentials",{email:t,password:n,redirect:!1});case 11:if(!(null!=(c=e.sent)&&c.error)){e.next=14;break}throw Error(c.error);case 14:l.Ay.success("Tạo t\xe0i khoản th\xe0nh c\xf4ng"),f.push("/dashboard"),e.next=22;break;case 18:throw e.prev=18,e.t0=e.catch(0),console.error("Register error:",e.t0),e.t0;case 22:case"end":return e.stop()}},e,null,[[0,18]])})),function(e,t,n){return a.apply(this,arguments)})}}},81163:(e,t,n)=>{n.d(t,{Ip:()=>c,Js:()=>p,O6:()=>v,Tp:()=>w,Xu:()=>x,YQ:()=>u,Yx:()=>m,av:()=>d,fM:()=>y,no:()=>g,qf:()=>f,wx:()=>l,yF:()=>h,yW:()=>b});var r=n(63857),a=n(43081),s=n.n(a),i=n(51695),o=function(){var e=(0,r.A)(s().mark(function e(){var t,n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.A.get("/partner/info");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:if(e.prev=7,e.t0=e.catch(0),console.error("Get partner info error:",e.t0),(null==(n=e.t0.response)||null==(n=n.data)?void 0:n.code)!=="NO_PARTNER_ACCESS"){e.next=12;break}throw Error("NO_PARTNER_ACCESS");case 12:throw e.t0;case 13:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.A.get("/partner/plan");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Get partner plan error:",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.A.get("/partner/usage");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Get partner usage error:",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.A.get("/partner/dashboard/stats");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Get dashboard stats error:",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.A)(s().mark(function e(){var t,n,r=arguments;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:5,e.prev=1,e.next=4,i.A.get("/partner/dashboard/recent-pages",{params:{limit:t}});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(1),console.error("Get recent pages error:",e.t0),e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:return t=e.sent.partner,e.abrupt("return",{success:!0,branding:{logo:t.logo,brandName:t.displayName,brandColor:t.brandColor,customDomain:t.customDomain||"",showBranding:t.showBranding,watermarkEnabled:!0}});case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Get branding settings error:",e.t0),e.t0;case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.A)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.A.put("/partner/info",{displayName:t.brandName,brandColor:t.brandColor,showBranding:t.showBranding});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Update branding settings error:",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:return t=e.sent.partner,e.abrupt("return",{success:!0,settings:{displayName:t.displayName,contactEmail:t.contactEmail,address:t.address||"",phoneNumber:t.phone||"",website:t.website||"",description:t.description||""},partner:t});case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Get partner settings error:",e.t0),e.t0;case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.A)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.A.put("/partner/info",{displayName:t.displayName,contactEmail:t.contactEmail,address:t.address,phone:t.phoneNumber||"",website:t.website||"",description:t.description||""});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Update partner settings error:",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.A)(s().mark(function e(t){var n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new FormData).append("logo",t),e.next=5,i.A.post("/partner/upload/logo",n,{headers:{"Content-Type":"multipart/form-data"}});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(0),console.error("Upload logo error:",e.t0),e.t0;case 13:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.A)(s().mark(function e(t){var n,r,a,o;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.A.post("/partner/clients",t,{validateStatus:function(e){return e<500}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error creating partner client:",e.t0),null===e.t0||void 0===e.t0||null==(r=e.t0.response)||r.status,o=(null===e.t0||void 0===e.t0||null==(a=e.t0.response)||null==(a=a.data)?void 0:a.message)||"Kh\xf4ng thể tạo kh\xe1ch h\xe0ng",e.abrupt("return",{success:!1,message:o,client:void 0});case 13:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.A)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.A.get("/partner/clients",{params:t});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching partner clients:",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.A)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.A.get("/partner/clients/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error fetching partner client:",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,r.A)(s().mark(function e(t,n){var r,a,o,c;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.A.put("/partner/clients/".concat(t),n,{validateStatus:function(e){return e<500}});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error updating partner client:",e.t0),null===e.t0||void 0===e.t0||null==(a=e.t0.response)||a.status,c=(null===e.t0||void 0===e.t0||null==(o=e.t0.response)||null==(o=o.data)?void 0:o.message)||"Kh\xf4ng thể cập nhật kh\xe1ch h\xe0ng",e.abrupt("return",{success:!1,message:c,client:void 0});case 13:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,r.A)(s().mark(function e(t){var n,r,a=arguments;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],e.prev=1,e.next=4,i.A.delete("/partner/clients/".concat(t),{params:{deletePages:n}});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(1),console.error("Error deleting partner client:",e.t0),e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},81589:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(36423),a=n(48230),s=n.n(a),i=n(37876);let o=function(e){var t=e.showText;return(0,i.jsx)(s(),{href:"/",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("img",{src:"".concat(r.A.CDN_URL,"/assets/logos/logo-symbol.svg"),className:"h-6 mr-3 sm:h-9",alt:"Logo"}),(void 0===t||t)&&(0,i.jsx)("img",{src:"".concat(r.A.CDN_URL,"/assets/logos/logo-text.svg"),className:"h-5 mr-3 sm:h-6",alt:"Cinelove Logo"})]})})}},81848:(e,t,n)=>{n.d(t,{J:()=>g});var r=n(27925),a=n(42969),s=n(63857),i=n(43081),o=n.n(i),c=n(14232),u=n(10553),l=n(90769),m=n(84699),p=n(81163);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=function(){var e,t,n=(0,u.useSession)(),a=n.data,i=n.update,d=(0,c.useState)({plan:"free",pagesCount:0,imagesCount:0,totalViews:0,pagesBreakdown:void 0,planExpiration:null,baseLimits:{maxWebsites:1,maxImages:10,maxViews:500,durationMonths:6},enhancedLimits:{maxWebsites:1,maxImages:10,maxViews:500,durationMonths:6,features:{customMusic:!1,removeWatermark:!1,premiumTemplates:!1,giftBox:!1,commentBox:!1,bankQR:!1}},addonBonuses:{websites:0,images:0,views:0,timeMonths:0,unlockedFeatures:[]},remainingWebsites:1,remainingImages:10,remainingViews:500,canCreate:!0,canUploadImages:!0,isLoading:!0,hasAddons:!1}),g=d[0],x=d[1],f=(0,c.useState)(!1),b=f[0],v=f[1],w=(0,c.useRef)(!1),y=(0,c.useRef)(null),k=(e=(0,s.A)(o().mark(function e(){var t,n,s,c,u,d,g,f,b,v,k,C,I,E,T,P,_,M,L,S,B,V,U,W,O,D,R,F,K,H,q,G,X,Q,z,Y,J,$,Z,ee,et,en,er,ea,es;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return x(function(e){return h(h({},e),{},{isLoading:!1})}),e.abrupt("return");case 3:if(!w.current){e.next=5;break}return e.abrupt("return");case 5:if(n=(null==(t=a.user)?void 0:t.role)==="partner",e.prev=6,w.current=!0,!n){e.next=25;break}return e.next=11,Promise.all([(0,p.Ip)().catch(function(){return null}),(0,p.YQ)().catch(function(){return null})]);case 11:if(M=e.sent,S=(L=(0,r.A)(M,2))[0],V=(null==(B=L[1])?void 0:B.data)||{imagesCount:0,pagesCount:0,totalViews:0},!(!(null!=S&&S.success)||!(null!=S&&S.plan))){e.next=20;break}return U={maxWebsites:100,maxImages:1e3,maxViews:1e5,durationMonths:120,features:{customMusic:!1,removeWatermark:!1,premiumTemplates:!0,giftBox:!0,commentBox:!0,bankQR:!0}},x({plan:"starter",pagesCount:V.pagesCount,imagesCount:V.imagesCount,totalViews:V.totalViews,pagesBreakdown:V.pagesBreakdown,planExpiration:null,baseLimits:U,enhancedLimits:h(h({},U),{},{features:U.features}),addonBonuses:{websites:0,images:0,views:0,timeMonths:0,unlockedFeatures:[]},remainingWebsites:Math.max(0,U.maxWebsites-V.pagesCount),remainingImages:Math.max(0,U.maxImages-V.imagesCount),remainingViews:Math.max(0,U.maxViews-V.totalViews),canCreate:V.pagesCount<U.maxWebsites,canUploadImages:V.imagesCount<U.maxImages,isLoading:!1,hasAddons:!1}),e.abrupt("return");case 20:return D={maxWebsites:(O=(W=S.plan).limits).maxPages,maxImages:O.maxImages,maxViews:O.maxViews,durationMonths:O.durationMonths,features:{customMusic:(null==(C=O.features)?void 0:C.customMusic)||!1,removeWatermark:(null==(I=O.features)?void 0:I.removeWatermark)||!1,premiumTemplates:(null==(E=O.features)?void 0:E.premiumTemplates)||!1,giftBox:(null==(T=O.features)?void 0:T.giftBox)||!1,commentBox:(null==(P=O.features)?void 0:P.commentBox)||!1,bankQR:(null==(_=O.features)?void 0:_.bankQR)||!1}},x({plan:W.planId,pagesCount:V.pagesCount,imagesCount:V.imagesCount,totalViews:V.totalViews,pagesBreakdown:V.pagesBreakdown,planExpiration:W.planExpirationAt?{planUpdatedAt:W.planUpdatedAt||null,planExpirationAt:W.planExpirationAt||null}:null,baseLimits:D,enhancedLimits:D,addonBonuses:{websites:0,images:0,views:0,timeMonths:0,unlockedFeatures:[]},remainingWebsites:Math.max(0,O.maxPages-V.pagesCount),remainingImages:Math.max(0,O.maxImages-V.imagesCount),remainingViews:Math.max(0,O.maxViews-V.totalViews),canCreate:V.pagesCount<O.maxPages,canUploadImages:V.imagesCount<O.maxImages,isLoading:!1,hasAddons:!1}),e.abrupt("return");case 25:return e.next=27,Promise.all([m.A.getUserUsage(),m.A.getUserAddons(),m.A.getUserLimits().catch(function(){return null})]);case 27:R=e.sent,K=(F=(0,r.A)(R,3))[0],H=F[1],q=F[2],G=(null==(s=K.data)?void 0:s.pagesCount)||0,X=(null==(c=K.data)?void 0:c.imagesCount)||0,Q=(null==(u=K.data)?void 0:u.totalViews)||0,z=null==(d=K.data)?void 0:d.pagesBreakdown,Y=(null==(g=a.user)?void 0:g.plan)||"free",J=(0,l.RL)(Y),($=null==q||null==(f=q.data)?void 0:f.basePlan)&&$!==Y&&y.current!==$&&(y.current=$,setTimeout(function(){var e;console.log("Updating session plan:",{from:Y,to:$,userId:null==a||null==(e=a.user)?void 0:e.email}),i({user:h(h({},a.user),{},{plan:$})})},0)),et=j(J,ee=N(Z=(null==(b=H.data)?void 0:b.filter(function(e){return"ACTIVE"===e.status}))||[]),Y),en=(null==q||null==(v=q.data)?void 0:v.limits)||et,x({plan:Y,pagesCount:G,imagesCount:X,totalViews:Q,pagesBreakdown:z,planExpiration:(null==q||null==(k=q.data)?void 0:k.planExpiration)||null,baseLimits:{maxWebsites:J.maxWebsites,maxImages:J.maxImages,maxViews:J.maxViews||500,durationMonths:"string"==typeof J.duration?parseInt(J.duration):J.duration},enhancedLimits:en,addonBonuses:ee,remainingWebsites:Math.max(0,en.maxWebsites-G),remainingImages:Math.max(0,en.maxImages-X),remainingViews:Math.max(0,(en.maxViews||500)-Q),canCreate:G<en.maxWebsites,canUploadImages:X<en.maxImages,isLoading:!1,hasAddons:Z.length>0}),e.next=53;break;case 47:e.prev=47,e.t0=e.catch(6),console.error("Error fetching plan data:",e.t0),ea=(null==(er=a.user)?void 0:er.plan)||"free",es=(0,l.RL)(ea),x({plan:ea,pagesCount:0,imagesCount:0,totalViews:0,pagesBreakdown:void 0,planExpiration:null,baseLimits:{maxWebsites:es.maxWebsites,maxImages:es.maxImages,maxViews:es.maxViews||500,durationMonths:"string"==typeof es.duration?parseInt(es.duration):es.duration},enhancedLimits:{maxWebsites:es.maxWebsites,maxImages:es.maxImages,maxViews:es.maxViews||500,durationMonths:"string"==typeof es.duration?parseInt(es.duration):es.duration,features:A(ea)},addonBonuses:{websites:0,images:0,views:0,timeMonths:0,unlockedFeatures:[]},remainingWebsites:es.maxWebsites,remainingImages:es.maxImages,remainingViews:es.maxViews||500,canCreate:!0,canUploadImages:!0,isLoading:!1,hasAddons:!1});case 53:return e.prev=53,w.current=!1,e.finish(53);case 56:case"end":return e.stop()}},e,null,[[6,47,53,56]])})),function(){return e.apply(this,arguments)}),N=function(e){return e.reduce(function(e,t){switch(t.addonType){case"WEBSITE_EXTENSION":e.websites+=t.value*t.quantity;break;case"STORAGE_EXTENSION":e.images+=t.value*t.quantity;break;case"VIEW_COUNT_EXTENSION":e.views+=t.value*t.quantity;break;case"TIME_EXTENSION":e.timeMonths+=t.value*t.quantity;break;case"FEATURE_UNLOCK":t.featureKey&&e.unlockedFeatures.push(t.featureKey)}return e},{websites:0,images:0,views:0,timeMonths:0,unlockedFeatures:[]})},j=function(e,t,n){var r=A(n),a=h(h({},r),{},{customMusic:r.customMusic||t.unlockedFeatures.includes("customMusic"),removeWatermark:r.removeWatermark||t.unlockedFeatures.includes("removeWatermark"),premiumTemplates:r.premiumTemplates||t.unlockedFeatures.includes("premiumTemplates"),giftBox:r.giftBox||t.unlockedFeatures.includes("giftBox"),commentBox:r.commentBox||t.unlockedFeatures.includes("commentBox"),bankQR:r.bankQR||t.unlockedFeatures.includes("bankQR")});return{maxWebsites:e.maxWebsites+t.websites,maxImages:e.maxImages+t.images,maxViews:(e.maxViews||500)+t.views,durationMonths:e.duration+t.timeMonths,features:a}},A=function(e){switch(e.toLowerCase()){case"premium":return{customMusic:!0,removeWatermark:!0,premiumTemplates:!0,giftBox:!0,commentBox:!0,bankQR:!0};case"basic":return{customMusic:!0,removeWatermark:!0,premiumTemplates:!1,giftBox:!0,commentBox:!0,bankQR:!0};default:return{customMusic:!1,removeWatermark:!1,premiumTemplates:!1,giftBox:!1,commentBox:!1,bankQR:!1}}},C=(0,c.useCallback)(function(){return!!g.canCreate||(v(!0),!1)},[g.canCreate]),I=(0,c.useCallback)(function(){return!!g.canUploadImages||(v(!0),!1)},[g.canUploadImages]),E=(0,c.useCallback)(function(){v(!1)},[]),T=(0,c.useCallback)(function(){x(function(e){return h(h({},e),{},{isLoading:!0})}),k()},[a]);return(0,c.useEffect)(function(){a&&k()},[null==a||null==(t=a.user)?void 0:t.plan]),h(h({},g),{},{showLimitModal:b,checkCanCreateWebsite:C,checkCanUploadImage:I,closeLimitModal:E,refreshPlanData:T,getMaxWebsites:function(){return g.enhancedLimits.maxWebsites},getMaxImages:function(){return g.enhancedLimits.maxImages},getMaxViews:function(){return g.enhancedLimits.maxViews},getDurationMonths:function(){return g.enhancedLimits.durationMonths},hasFeature:function(e){return g.enhancedLimits.features[e]||!1},getWebsiteUsagePercent:function(){return Math.round(g.pagesCount/g.enhancedLimits.maxWebsites*100)},getImageUsagePercent:function(){return Math.round(g.imagesCount/g.enhancedLimits.maxImages*100)},getViewUsagePercent:function(){return Math.round((g.totalViews||0)/g.enhancedLimits.maxViews*100)},maxWebsites:g.enhancedLimits.maxWebsites,maxViews:g.enhancedLimits.maxViews})}},83063:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(63857),a=n(43081),s=n.n(a),i=n(87334),o=n(3566),c=n(14232),u=n(98594),l=n(90769),m=n(89099),p=n(84699),d=n(24530),h=n(37876);let g=function(e){var t,n,a,g=e.isOpen,x=e.onClose,f=e.currentPlan,b=e.currentCount,v=e.limitType,w=void 0===v?"website":v,y=e.openInNewTab,k=void 0!==y&&y,N=e.enhancedLimit,j=e.addonBonus,A=void 0===j?0:j,C=e.hasAddons,I=void 0!==C&&C,E=(0,l.RL)(f),T="website"===w,P=T?E.maxWebsites:E.maxImages,_=N||P,M=(0,c.useState)([]),L=M[0],S=M[1],B=(0,c.useState)(!1),V=B[0],U=B[1],W=(0,c.useState)("upgrade"),O=W[0],D=W[1],R=(0,m.useRouter)(),F=(t=f.toLowerCase(),n=[],"free"===t?n.push(d.E4.find(function(e){return"basic"===e.name}),d.E4.find(function(e){return"premium"===e.name})):"basic"===t&&n.push(d.E4.find(function(e){return"premium"===e.name})),n.filter(Boolean));(0,c.useEffect)(function(){g&&K()},[g,f,w]);var K=(a=(0,r.A)(s().mark(function e(){var t,n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(!0),e.next=4,p.A.getAddons(f);case 4:(t=e.sent).success&&(n="website"===w?"WEBSITE_EXTENSION":"STORAGE_EXTENSION",r={website:"WEBSITES",image:"STORAGE"},S(Object.values(t.data).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e.type===n||e.category===r[w]}).sort(function(e,t){return(e.sortOrder||0)-(t.sortOrder||0)}).slice(0,3))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching addons:",e.t0);case 11:return e.prev=11,U(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[0,8,11,14]])})),function(){return a.apply(this,arguments)}),H=function(e){k?window.open(e,"_blank"):R.push(e),x(!0)},q=function(e){var t="/checkout/addon?id=".concat(e.addonId);k?window.open(t,"_blank"):R.push(t),x(!0)};return(0,h.jsx)(i.e,{appear:!0,show:g,as:c.Fragment,children:(0,h.jsxs)(o.lG,{as:"div",className:"relative",style:{zIndex:9999},onClose:x,children:[(0,h.jsx)(i.e.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,h.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,h.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,h.jsx)(i.e.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,h.jsxs)(o.lG.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,h.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,h.jsx)("div",{className:"rounded-full bg-orange-100 p-3",children:(0,h.jsx)(u.In,{icon:"solar:info-circle-bold",className:"h-8 w-8 text-orange-600"})})}),(0,h.jsx)(o.lG.Title,{as:"h3",className:"text-xl font-semibold leading-6 text-gray-900 text-center mb-2",children:I&&A>0?"Đ\xe3 đạt giới hạn tối đa":"Đ\xe3 đạt giới hạn g\xf3i ".concat(E.name)}),(0,h.jsxs)("div",{className:"mt-4 text-center",children:[(0,h.jsx)("p",{className:"text-gray-600 mb-6",children:T?(0,h.jsxs)(h.Fragment,{children:["Bạn đ\xe3 tạo"," ",(0,h.jsxs)("span",{className:"font-semibold text-orange-600",children:[b,"/",_]})," ","website.",I&&A>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("br",{}),(0,h.jsxs)("span",{className:"text-sm text-green-600",children:["(G\xf3i ",f,": ",P," + Add-ons: +",A,")"]})]}),(0,h.jsx)("br",{}),"Chọn một trong c\xe1c t\xf9y chọn b\xean dưới để tiếp tục."]}):(0,h.jsxs)(h.Fragment,{children:["Bạn đ\xe3 tải l\xean"," ",(0,h.jsxs)("span",{className:"font-semibold text-orange-600",children:[b,"/",_]})," ","h\xecnh ảnh.",I&&A>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("br",{}),(0,h.jsxs)("span",{className:"text-sm text-green-600",children:["(G\xf3i ",f,": ",P," + Add-ons: +",A,")"]})]}),(0,h.jsx)("br",{}),"Chọn một trong c\xe1c t\xf9y chọn b\xean dưới để tiếp tục."]})}),(0,h.jsx)("div",{className:"flex justify-center mb-6",children:(0,h.jsxs)("div",{className:"bg-gray-100 rounded-lg p-1 flex",children:[(0,h.jsx)("button",{onClick:function(){return D("upgrade")},className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("upgrade"===O?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"\uD83D\uDC51 N\xe2ng cấp g\xf3i"}),(0,h.jsx)("button",{onClick:function(){return D("addon")},className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("addon"===O?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"\uD83D\uDCA1 Mua slot (Tiết kiệm)"})]})}),"addon"===O&&(0,h.jsx)("div",{className:"space-y-4 mb-6",children:(0,h.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,h.jsx)("h4",{className:"font-semibold text-green-800 mb-2 flex items-center",children:"\uD83D\uDCA1 Mua th\xeam slot"}),(0,h.jsxs)("p",{className:"text-sm text-green-700 mb-3",children:["Chỉ mua th\xeam"," ","website"===w?"slot website":"dung lượng ảnh"," ","m\xe0 kh\xf4ng cần n\xe2ng cấp to\xe0n bộ g\xf3i"]}),V?(0,h.jsxs)("div",{className:"text-center py-4",children:[(0,h.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),(0,h.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Đang tải add-ons..."})]}):L.length>0?(0,h.jsx)("div",{className:"grid gap-3",children:L.map(function(e){var t;return(0,h.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("span",{className:"text-2xl",children:"website"===w?"\uD83C\uDF10":"image"===w?"\uD83D\uDDBC️":"\uD83D\uDCE6"}),(0,h.jsxs)("div",{className:"text-left",children:[(0,h.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),(0,h.jsx)("p",{className:"text-sm text-gray-500",children:e.description}),(0,h.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,h.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["+",e.value," ","website"===w?"website":"ảnh"]}),e.tags.includes("popular")&&(0,h.jsx)("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:"Phổ biến"})]})]})]}),(0,h.jsxs)("div",{className:"text-right",children:[(0,h.jsx)("div",{className:"font-bold text-green-600 text-lg",children:(t=e.price,new Intl.NumberFormat("vi-VN").format(t)+" VND")}),(0,h.jsx)("button",{onClick:function(){return q(e)},className:"mt-2 bg-green-600 text-white px-3 py-1 rounded-md text-sm hover:bg-green-700 transition-colors",children:"Mua ngay"})]})]})},e.addonId)})}):(0,h.jsx)("div",{className:"text-center py-4",children:(0,h.jsx)("p",{className:"text-sm text-gray-500",children:"Kh\xf4ng c\xf3 add-on ph\xf9 hợp"})})]})}),"upgrade"===O&&F.length>0&&(0,h.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,h.jsxs)("h4",{className:"font-semibold text-blue-900 mb-4 flex items-center justify-center",children:[(0,h.jsx)(u.In,{icon:"solar:crown-star-bold",className:"mr-2 h-5 w-5"}),"Chọn g\xf3i n\xe2ng cấp"]}),(0,h.jsx)("div",{className:"grid gap-4 ".concat(2===F.length?"grid-cols-1 md:grid-cols-2":"grid-cols-1"),children:F.map(function(e){return(0,h.jsxs)("div",{className:"flex flex-col justify-between relative border-2 rounded-lg p-4 transition-all hover:shadow-md ".concat(e.popular||e.featured?"border-blue-300 bg-gradient-to-r from-blue-50 to-purple-50":"border-gray-200 bg-white"),children:[e.popular&&(0,h.jsx)("div",{className:"absolute -top-2 left-4 bg-orange-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"Phổ biến"}),e.featured&&(0,h.jsx)("div",{className:"absolute -top-2 right-4 bg-purple-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"Tốt nhất"}),(0,h.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,h.jsxs)("div",{children:[(0,h.jsxs)("h5",{className:"font-bold text-lg text-gray-900 flex items-center",children:[e.featured&&(0,h.jsx)(u.In,{icon:"solar:crown-bold",className:"mr-1 h-4 w-4 text-yellow-500"}),e.displayName]}),(0,h.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]}),(0,h.jsxs)("div",{className:"text-right",children:[e.isPromotional&&e.originalPrice?(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"text-sm text-gray-500 line-through",children:e.originalPrice}),(0,h.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.price}),(0,h.jsxs)("div",{className:"inline-block bg-red-100 text-red-800 text-xs font-bold px-1 py-0.5 rounded-full border border-red-300",children:["-",(0,d.gl)(e.price,e.originalPrice),"%"]})]}):(0,h.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.price}),(0,h.jsx)("div",{className:"text-sm text-gray-500",children:e.duration})]})]}),(0,h.jsxs)("div",{className:"text-sm space-y-1 mb-4",children:[(0,h.jsxs)("div",{className:"text-gray-700",children:["• ",e.limits.websites," website"]}),(0,h.jsxs)("div",{className:"text-gray-700",children:["• ",e.limits.images," ảnh"]}),(0,h.jsxs)("div",{className:"text-gray-700",children:["• Thời hạn lưu website: ",e.limits.duration]}),(0,h.jsx)("div",{className:"text-gray-700",children:"• X\xf3a watermark"}),e.featured&&(0,h.jsx)("div",{className:"text-gray-700",children:"• Template Premium"}),(0,h.jsx)("div",{className:"text-gray-700",children:"• Nhiều t\xednh năng cao cấp"})]}),(0,h.jsxs)("button",{onClick:function(){return H(e.ctaLink+"&upgradeSource=plan-limit-".concat(w))},className:"w-full py-2 px-4 rounded-md font-medium transition-colors ".concat(e.featured?"bg-purple-600 text-white hover:bg-purple-700":e.popular?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-600 text-white hover:bg-gray-700"),children:["Chọn ",e.displayName]})]},e.id)})})]}),(0,h.jsx)("div",{className:"mt-2 mb-4",children:"addon"===O?(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("button",{type:"button",className:"w-fit inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 transition-colors",onClick:function(){k?window.open("/dashboard/addons","_blank"):R.push("/dashboard/addons"),x(!0)},children:[(0,h.jsx)(u.In,{icon:"solar:bag-smile-bold",className:"mr-2 h-4 w-4"}),"Xem tất cả Add-ons"]})}):(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("button",{type:"button",className:"w-fit inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 transition-colors",onClick:function(){k?window.open("/pricing-plans","_blank"):R.push("/pricing-plans"),x(!0)},children:[(0,h.jsx)(u.In,{icon:"solar:list-check-bold",className:"mr-2 h-4 w-4"}),"Xem tất cả g\xf3i dịch vụ"]})})}),(0,h.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,h.jsxs)("h4",{className:"font-medium text-gray-900 mb-2",children:["G\xf3i hiện tại: ",E.name]}),(0,h.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,h.jsxs)("div",{children:["• Tối đa ",E.maxWebsites," website"]}),(0,h.jsxs)("div",{children:["• Tối đa ",E.maxImages," ảnh"]}),(0,h.jsxs)("div",{children:["• Thời hạn lưu website: ",E.duration]})]})]}),(0,h.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-gray-300 bg-gray-100 px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 transition-colors",onClick:function(){return x(!1)},children:"Đ\xf3ng"})]})]})})})})]})})}},84699:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(63857),a=n(67251),s=n(23745),i=n(42969),o=n(43081),c=n.n(o),u=n(51695);let l=new(function(){var e,t,n,o,l,m,p,d,h,g,x,f,b;return(0,s.A)(function e(){(0,a.A)(this,e),(0,i.A)(this,"baseUrl","/api/addons"),(0,i.A)(this,"payUrl","/pay")},[{key:"getCategories",value:(e=(0,r.A)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.A.get("".concat(this.baseUrl,"/categories"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"getAddons",value:(t=(0,r.A)(c().mark(function e(t){var n,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?"?plan=".concat(t):"",e.next=3,u.A.get("".concat(this.baseUrl).concat(n));case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"getAddonById",value:(n=(0,r.A)(c().mark(function e(t){var n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.A.get("".concat(this.baseUrl,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getUserLimits",value:(o=(0,r.A)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.A.get("".concat(this.baseUrl,"/user/limits"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"getUserAddons",value:(l=(0,r.A)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.A.get("".concat(this.baseUrl,"/user/purchased"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"getAddonTransactions",value:(m=(0,r.A)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.A.get("".concat(this.baseUrl,"/user/transactions"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"getUserUsage",value:(p=(0,r.A)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.A.get("".concat(this.baseUrl,"/user/usage"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"checkPermission",value:(d=(0,r.A)(c().mark(function e(t,n){var r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.A.post("".concat(this.baseUrl,"/user/check-permission"),{action:t,metadata:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return d.apply(this,arguments)})},{key:"canUploadImage",value:(h=(0,r.A)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.checkPermission("upload_image");case 3:return t=e.sent,e.abrupt("return",t.data.allowed);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error checking upload permission:",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,this,[[0,7]])})),function(){return h.apply(this,arguments)})},{key:"canCreateWebsite",value:(g=(0,r.A)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.checkPermission("create_website");case 3:return t=e.sent,e.abrupt("return",t.data.allowed);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error checking website permission:",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,this,[[0,7]])})),function(){return g.apply(this,arguments)})},{key:"hasFeature",value:(x=(0,r.A)(c().mark(function e(t){var n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.checkPermission("use_feature",{feature:t});case 3:return n=e.sent,e.abrupt("return",n.data.allowed);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error checking feature permission:",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,this,[[0,7]])})),function(e){return x.apply(this,arguments)})},{key:"formatPrice",value:function(e){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0}).format(e)}},{key:"getAddonDisplayName",value:function(e){switch(e.type){case"TIME_EXTENSION":return"".concat(e.name," (+").concat(e.value," th\xe1ng)");case"STORAGE_EXTENSION":return"".concat(e.name," (+").concat(e.value," h\xecnh)");case"WEBSITE_EXTENSION":return"".concat(e.name," (+").concat(e.value," website)");default:return e.name}}},{key:"getCategoryIcon",value:function(e){return({TIME:"clock",STORAGE:"image",WEBSITES:"globe",FEATURES:"star"})[e]||"package"}},{key:"createAddonPaymentLink",value:(f=(0,r.A)(c().mark(function e(t){var n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.A.post("".concat(this.payUrl,"/create-addon-payment-link"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"testAddonPurchase",value:(b=(0,r.A)(c().mark(function e(t){var n,r,a=arguments;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:1,e.next=3,u.A.post("".concat(this.payUrl,"/test-addon-purchase"),{addonId:t,quantity:n});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e,this)})),function(e){return b.apply(this,arguments)})}])}())},90769:(e,t,n)=>{n.d(t,{HK:()=>r,RL:()=>a});var r={free:{name:"Free",maxWebsites:1,maxImages:10,duration:"6 th\xe1ng",features:["basic_editor","view_count"],maxViews:300},basic:{name:"Basic",maxWebsites:3,maxImages:50,duration:"2 năm",features:["basic_editor","view_count","blessing_box","gift_feature","bank_qr"],maxViews:1e4},premium:{name:"Premium",maxWebsites:5,maxImages:100,duration:"5 năm",features:["basic_editor","view_count","blessing_box","gift_feature","bank_qr","premium_templates","custom_support"],maxViews:5e4},partner:{name:"Partner",maxWebsites:50,maxImages:500,duration:"10 năm",features:["basic_editor","view_count","blessing_box","gift_feature","bank_qr","premium_templates","custom_support","background_removal"],maxViews:5e5}},a=function(e){return r[e.toLowerCase()]||r.free}},92400:(e,t,n)=>{n.d(t,{f:()=>r});var r=(0,n(8106).v)(function(e){return{isDesignModalOpen:!1,openDesignModal:function(){return e({isDesignModalOpen:!0})},closeDesignModal:function(){return e({isDesignModalOpen:!1})}}})}}]);